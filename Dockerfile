FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"LS0tCnZlcnNpb246IDEuMApuYW1lOiBraWJhbmEtYXBiCmRlc2NyaXB0aW9uOiBBUEIgdG8gZGVw\
bG95IEtpYmFuYSBPU1MKYmluZGFibGU6IEZhbHNlCmFzeW5jOiBvcHRpb25hbAptZXRhZGF0YToK\
ICBkaXNwbGF5TmFtZTogIktpYmFuYSAoQVBCKSIKICBkZXBlbmRlbmNpZXM6IFsnZG9ja2VyLmVs\
YXN0aWMuY28va2liYW5hL2tpYmFuYS1vc3M6Ni4yLjEnXQogIGltYWdlVXJsOiBodHRwczovL3d3\
dy5lbGFzdGljLmNvL2Fzc2V0cy9ibHQyODJhZTI0MjBlMzJmYzM4L2ljb24ta2liYW5hLWJiLnN2\
ZwogIGRvY3VtZW50YXRpb25Vcmw6IGh0dHBzOi8vd3d3LmVsYXN0aWMuY28vZ3VpZGUvZW4va2li\
YW5hLzYuMS9pbmRleC5odG1sCiAgcHJvdmlkZXJEaXNwbGF5TmFtZTogIlJlZCBIYXQsIEluYy4i\
CnRhZ3M6CiAgLSBraWJhbmEKICAtIGVsYXN0aWNzZWFyY2gKcGxhbnM6CiAgLSBuYW1lOiBlcGhl\
bWVyYWwKICAgIGRlc2NyaXB0aW9uOiBUaGlzIHBsYW4gZGVwbG95cyBLaWJhbmEgd2l0aG91dCBw\
ZXJzaXN0ZW50IGNhY2hlCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxh\
eU5hbWU6IEVwaGVtZXJhbCBpbnN0YWxsYXRpb24KICAgIGRlZmF1bHQ6IFRydWUKICAgIHBhcmFt\
ZXRlcnM6CiAgICAtIG5hbWU6IGFwcGxpY2F0aW9uX25hbWUKICAgICAgdHlwZTogc3RyaW5nCiAg\
ICAgIGRlZmF1bHQ6IGtpYmFuYQogICAgICBkZXNjcmlwdGlvbjogS2liYW5hIGFwcGxpY2F0aW9u\
CiAgICAgIHRpdGxlOiBBcHBsaWNhdGlvbiBuYW1lCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAt\
IG5hbWU6IGtpYmFuYV9tZW1vcnlfbGltaXQKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRlZmF1\
bHQ6IDI1Nk1pCiAgICAgIGRlc2NyaXB0aW9uOiBNZW1vcnkgbGltaXQgZm9yIEtpYmFuYSBjb250\
YWluZXIKICAgICAgdGl0bGU6IE1lbW9yeSBsaW1pdAogICAgICByZXF1aXJlZDogdHJ1ZQogICAg\
LSBuYW1lOiBraWJhbmFfdmVyc2lvbgogICAgICB0aXRsZTogVmVyc2lvbgogICAgICByZXF1aXJl\
ZDogdHJ1ZQogICAgICBkZWZhdWx0OiA2LjIuMQogICAgICB0eXBlOiBlbnVtCiAgICAgIGVudW06\
IFsiNi4yLjEiLCAiNi4xLjIiLCAiNS41LjIiXQogICAgLSBuYW1lOiBzZWN1cmUKICAgICAgdHlw\
ZTogYm9vbGVhbgogICAgICBkZWZhdWx0OiB0cnVlCiAgICAgIGRlc2NyaXB0aW9uOiBBbGxvdyBh\
Y2Nlc3Mgb25seSB0byBPcGVuU2hpZnQgdXNlcnMgaGF2aW5nIGFjY2VzcyB0byB0aGUgc2Vydmlj\
ZQogICAgICB0aXRsZTogU2VjdXJlZCBhY2Nlc3MKICAtIG5hbWU6IHBlcnNpc3RlbnQKICAgIGRl\
c2NyaXB0aW9uOiBUaGlzIHBsYW4gZGVwbG95cyBLaWJhbmEgd2l0aCBwZXJzaXN0ZW50IGNhY2hl\
CiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxheU5hbWU6IFBlcnNpc3Rl\
bnQgaW5zdGFsbGF0aW9uCiAgICBwYXJhbWV0ZXJzOgogICAgLSBuYW1lOiBhcHBsaWNhdGlvbl9u\
YW1lCiAgICAgIHR5cGU6IHN0cmluZwogICAgICBkZWZhdWx0OiBraWJhbmEKICAgICAgZGVzY3Jp\
cHRpb246IEtpYmFuYSBhcHBsaWNhdGlvbgogICAgICB0aXRsZTogQXBwbGljYXRpb24gbmFtZQog\
ICAgICByZXF1aXJlZDogdHJ1ZQogICAgLSBuYW1lOiBraWJhbmFfbWVtb3J5X2xpbWl0CiAgICAg\
IHR5cGU6IHN0cmluZwogICAgICBkZWZhdWx0OiAyNTZNaQogICAgICBkZXNjcmlwdGlvbjogTWVt\
b3J5IGxpbWl0IGZvciBLaWJhbmEgY29udGFpbmVyCiAgICAgIHRpdGxlOiBNZW1vcnkgbGltaXQK\
ICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIC0gbmFtZToga2liYW5hX3B2Y19zaXplCiAgICAgIHR5\
cGU6IHN0cmluZwogICAgICBkZWZhdWx0OiAyMDBNaQogICAgICBkZXNjcmlwdGlvbjogS2liYW5h\
IHN0b3JhZ2Ugc2l6ZQogICAgICB0aXRsZTogS2liYW5hIHN0b3JhZ2UKICAgICAgcmVxdWlyZWQ6\
IHRydWUKICAgIC0gbmFtZToga2liYW5hX3ZlcnNpb24KICAgICAgdGl0bGU6IFZlcnNpb24KICAg\
ICAgcmVxdWlyZWQ6IHRydWUKICAgICAgZGVmYXVsdDogNi4yLjEKICAgICAgdHlwZTogZW51bQog\
ICAgICBlbnVtOiBbIjYuMi4xIiwgIjYuMS4yIiwgIjUuNS4yIl0KICAgIC0gbmFtZTogc2VjdXJl\
CiAgICAgIHR5cGU6IGJvb2xlYW4KICAgICAgZGVmYXVsdDogdHJ1ZQogICAgICBkZXNjcmlwdGlv\
bjogQWxsb3cgYWNjZXNzIG9ubHkgdG8gT3BlblNoaWZ0IHVzZXJzIGhhdmluZyBhY2Nlc3MgdG8g\
dGhlIHNlcnZpY2UKICAgICAgdGl0bGU6IFNlY3VyZWQgYWNjZXNzCg=="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
