FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"LS0tCnZlcnNpb246IDEuMC4wCm5hbWU6IGtpYmFuYS1hcGIKZGVzY3JpcHRpb246IEFQQiB0byBk\
ZXBsb3kgS2liYW5hIE9TUwpiaW5kYWJsZTogRmFsc2UKYXN5bmM6IG9wdGlvbmFsCm1ldGFkYXRh\
OgogIGRpc3BsYXlOYW1lOiAiS2liYW5hIChBUEIpIgogIGRlcGVuZGVuY2llczogWydkb2NrZXIu\
ZWxhc3RpYy5jby9raWJhbmEva2liYW5hLW9zczo2LjIuMSddCiAgaW1hZ2VVcmw6IGh0dHBzOi8v\
d3d3LmVsYXN0aWMuY28vYXNzZXRzL2JsdDI4MmFlMjQyMGUzMmZjMzgvaWNvbi1raWJhbmEtYmIu\
c3ZnCiAgZG9jdW1lbnRhdGlvblVybDogaHR0cHM6Ly93d3cuZWxhc3RpYy5jby9ndWlkZS9lbi9r\
aWJhbmEvNi4xL2luZGV4Lmh0bWwKICBwcm92aWRlckRpc3BsYXlOYW1lOiAiUmVkIEhhdCwgSW5j\
LiIKdGFnczoKICAtIGtpYmFuYQogIC0gZWxhc3RpY3NlYXJjaApwbGFuczoKICAtIG5hbWU6IGVw\
aGVtZXJhbAogICAgZGVzY3JpcHRpb246IFRoaXMgcGxhbiBkZXBsb3lzIEtpYmFuYSB3aXRob3V0\
IHBlcnNpc3RlbnQgY2FjaGUKICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNw\
bGF5TmFtZTogRXBoZW1lcmFsIGluc3RhbGxhdGlvbgogICAgZGVmYXVsdDogVHJ1ZQogICAgcGFy\
YW1ldGVyczoKICAgICAgLSBuYW1lOiBhcHBsaWNhdGlvbl9uYW1lCiAgICAgICAgdHlwZTogc3Ry\
aW5nCiAgICAgICAgZGVmYXVsdDoga2liYW5hCiAgICAgICAgZGVzY3JpcHRpb246IEtpYmFuYSBh\
cHBsaWNhdGlvbgogICAgICAgIHRpdGxlOiBBcHBsaWNhdGlvbiBuYW1lCiAgICAgICAgcmVxdWly\
ZWQ6IHRydWUKICAgICAgLSBuYW1lOiBraWJhbmFfbWVtb3J5X2xpbWl0CiAgICAgICAgdHlwZTog\
c3RyaW5nCiAgICAgICAgZGVmYXVsdDogMjU2TWkKICAgICAgICBkZXNjcmlwdGlvbjogTWVtb3J5\
IGxpbWl0IGZvciBLaWJhbmEgY29udGFpbmVyCiAgICAgICAgdGl0bGU6IE1lbW9yeSBsaW1pdAog\
ICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIC0gbmFtZToga2liYW5hX3ZlcnNpb24KICAgICAg\
ICB0aXRsZTogVmVyc2lvbgogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgZGVmYXVsdDog\
Ni4yLjEKICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgZW51bTogWyI2LjIuMSIsICI2LjEuMiIs\
ICI1LjUuMiJdCiAgICAgIC0gbmFtZToga2liYW5hX3NlY3VyZQogICAgICAgIHR5cGU6IGJvb2xl\
YW4KICAgICAgICBkZWZhdWx0OiB0cnVlCiAgICAgICAgZGVzY3JpcHRpb246IEFsbG93IGFjY2Vz\
cyBvbmx5IHRvIE9wZW5TaGlmdCB1c2VycyBoYXZpbmcgYWNjZXNzIHRvIHRoZSBzZXJ2aWNlCiAg\
ICAgICAgdGl0bGU6IFNlY3VyZWQgYWNjZXNzCiAgLSBuYW1lOiBwZXJzaXN0ZW50CiAgICBkZXNj\
cmlwdGlvbjogVGhpcyBwbGFuIGRlcGxveXMgS2liYW5hIHdpdGggcGVyc2lzdGVudCBjYWNoZQog\
ICAgZnJlZTogVHJ1ZQogICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBQZXJzaXN0ZW50\
IGluc3RhbGxhdGlvbgogICAgcGFyYW1ldGVyczoKICAgICAgLSBuYW1lOiBhcHBsaWNhdGlvbl9u\
YW1lCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgZGVmYXVsdDoga2liYW5hCiAgICAgICAg\
ZGVzY3JpcHRpb246IEtpYmFuYSBhcHBsaWNhdGlvbgogICAgICAgIHRpdGxlOiBBcHBsaWNhdGlv\
biBuYW1lCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgLSBuYW1lOiBraWJhbmFfbWVtb3J5\
X2xpbWl0CiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgZGVmYXVsdDogMjU2TWkKICAgICAg\
ICBkZXNjcmlwdGlvbjogTWVtb3J5IGxpbWl0IGZvciBLaWJhbmEgY29udGFpbmVyCiAgICAgICAg\
dGl0bGU6IE1lbW9yeSBsaW1pdAogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIC0gbmFtZTog\
a2liYW5hX3B2Y19zaXplCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgZGVmYXVsdDogMjAw\
TWkKICAgICAgICBkZXNjcmlwdGlvbjogS2liYW5hIHN0b3JhZ2Ugc2l6ZQogICAgICAgIHRpdGxl\
OiBLaWJhbmEgc3RvcmFnZQogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIC0gbmFtZToga2li\
YW5hX3ZlcnNpb24KICAgICAgICB0aXRsZTogVmVyc2lvbgogICAgICAgIHJlcXVpcmVkOiB0cnVl\
CiAgICAgICAgZGVmYXVsdDogNi4yLjEKICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgZW51bTog\
WyI2LjIuMSIsICI2LjEuMiIsICI1LjUuMiJdCiAgICAgIC0gbmFtZToga2liYW5hX3NlY3VyZQog\
ICAgICAgIHR5cGU6IGJvb2xlYW4KICAgICAgICBkZWZhdWx0OiB0cnVlCiAgICAgICAgZGVzY3Jp\
cHRpb246IEFsbG93IGFjY2VzcyBvbmx5IHRvIE9wZW5TaGlmdCB1c2VycyBoYXZpbmcgYWNjZXNz\
IHRvIHRoZSBzZXJ2aWNlCiAgICAgICAgdGl0bGU6IFNlY3VyZWQgYWNjZXNzCg=="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
